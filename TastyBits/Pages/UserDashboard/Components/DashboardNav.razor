@using Microsoft.AspNetCore.Identity;
@using Serilog;
@inject UserManager<IdentityUser> UserManager;

<div class="bg-white @Class">
	<p class="mb-5 p-5">Hello @userEmail</p>
	<nav class="flex flex-col">
		<NavLink class="hover:bg-emerald-300 text-gray-700 duration-500 p-5 font-medium" Href="dashboard/home">
            <div>
				<i class="fa-solid fa-carrot"></i>
				Recipes
			</div>
        </NavLink>
		<NavLink class="hover:bg-emerald-300 text-gray-700 duration-500 p-5 font-medium" Href="dashboard/settings">
			<div>
				<i class="fa-solid fa-gear"></i>
				Settings
			</div>
			</NavLink>
		<NavLink class="hover:bg-emerald-300 text-gray-700 duration-500 p-5 font-medium" Href="Identity/Account/logout">
			<div>
				<i class="fa-solid fa-right-from-bracket"></i>
				Log out
			</div>
		</NavLink>
	</nav>
</div>


@code {
	private string userEmail { get; set; }

	[Parameter]
	public string Class { get; set; }
	[CascadingParameter]
	private Task<AuthenticationState> authState { get; set; }

	protected override async Task OnInitializedAsync()
	{
		ClaimsPrincipal user = (await authState).User;
		if (user.Identity.IsAuthenticated) {
			userEmail = (await UserManager.GetUserAsync(user)).Email;
		}

	}
}
